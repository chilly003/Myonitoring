# ğŸ“š í¬íŒ… ë©”ë‰´ì–¼

## ğŸ› ï¸ 1. ì‚¬ìš© ë„êµ¬

### í˜‘ì—… ë„êµ¬

| **êµ¬ë¶„** | **ë„êµ¬** |
| --- | --- |
| ì´ìŠˆ ê´€ë¦¬ | Jira |
| í˜•ìƒ ê´€ë¦¬ | GitLab, Git |
| ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ | Notion, Mattermost, Kakao Talk |

### ë°°í¬ ë„êµ¬

| **êµ¬ë¶„** | **ë„êµ¬** |
| --- | --- |
| CI/CD | Jenkins, Docker |
| í´ë¼ìš°ë“œ | AWS EC2 |

### ì„¤ê³„ ë„êµ¬

| **êµ¬ë¶„** | **ë„êµ¬** |
| --- | --- |
| ì™€ì´ì–´í”„ë ˆì„ | Figma |
| ERD | MySQL WorkBench |
| ë¬¸ì„œ ì‘ì„± | Notion |
| íšŒë¡œë„ | OrCAD |
| ì‹œìŠ¤í…œ ì•„í‚¤í…ì³ | Excalidraw |
| 3D í”„ë¦°íŠ¸ |  Solid Works |

### ê°œë°œ ë„êµ¬

| **êµ¬ë¶„** | **ë„êµ¬** |
| --- | --- |
| IDE | Visual Studio Code,
IntelliJ Ultimate 2024.3.2 |

### AI

| **êµ¬ë¶„** | **ë„êµ¬** |
| --- | --- |
| ê³ ì–‘ì´ ëˆˆ ìœ„ì¹˜ íƒì§€ ëª¨ë¸ |  YOLO_v11 |
| ëˆˆ ì§ˆë³‘ ê²€ì‚¬ ëª¨ë¸ | MobileNet_v2 |

## ğŸ’» 2. ê°œë°œ í™˜ê²½

### Frontend

```json
"dependencies": {
    "@emotion/react": "^11.14.0",
    "@emotion/styled": "^11.14.0",
    "@heroicons/react": "^1.0.6",
    "@mui/icons-material": "^6.4.2",
    "@mui/material": "^6.4.2",
    "@reduxjs/toolkit": "^2.5.1",
    "@types/firebase": "^2.4.32",
    "@vitejs/plugin-react": "^4.3.4",
    "axios": "^1.7.9",
    "firebase": "^11.3.1",
    "framer-motion": "^12.4.2",
    "jwt-decode": "^4.0.0",
    "lucide-react": "^0.475.0",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-icons": "^5.4.0",
    "react-redux": "^9.2.0",
    "react-router-dom": "^7.1.5",
    "react-switch": "^7.1.0",
    "react-toastify": "^11.0.3",
    "recharts": "^2.15.1",
    "vite-plugin-pwa": "^0.21.1"
  },
  "devDependencies": {
    "@eslint/js": "^9.17.0",
    "@types/react": "^18.3.18",
    "@types/react-dom": "^18.3.5",
    "@vitejs/plugin-react-swc": "^3.5.0",
    "autoprefixer": "^10.4.20",
    "eslint": "^9.17.0",
    "eslint-plugin-react-hooks": "^5.0.0",
    "eslint-plugin-react-refresh": "^0.4.16",
    "globals": "^15.14.0",
    "postcss": "^8.5.1",
    "tailwindcss": "^3.4.13",
    "typescript": "~5.6.2",
    "typescript-eslint": "^8.18.2",
    "vite": "^6.0.5"
  },
  "proxy": "https://myonitoring.site"
}
```

### Backend

| í”„ë¡œê·¸ë¨ | ë²„ì „ |
| --- | --- |
| JVM | openjdk 17.0.2 |
| Gradle | 8.12.1 |
| Spring Boot | 3.4.2 |
| Spring | 6.2.2 |
| JPA | 3.4.2 |
| MySQL Connector-J | 9.1.0 |
| Junit | 1.11.4 |
| JWT | 0.11.5 |

### Infrastructure

| êµ¬ë¶„ | ë²„ì „/ìš©ë„ |
| --- | --- |
| AWS t2.xlarge | CPU: 4 vCPUs, RAM: 16GB, OS: Ubuntu |
| Ubuntu | 22.04.5 LTS |
| Nginx | 1.27.4 |
| Docker | 27.5.1 |
| Jenkins | 2.495 |
| MySQL | 8.0.41 |
| VNC | ì›ê²© ì„œë²„ ì ‘ì† í”„ë¡œí† ì½œ |

### Embedded

| êµ¬ë¶„ | ì œí’ˆëª…/ë²„ì „ |
| --- | --- |
| ë¼ì¦ˆë² ë¦¬íŒŒì´ | ë¼ì¦ˆë² ë¦¬íŒŒì´5 8G |
| ì´ˆìŒíŒŒ ì„¼ì„œ | hr04 |
| ì¹´ë©”ë¼ ëª¨ë“ˆ | imx219 |
| ë¬´ê²Œ(ì €ìš¸) ì„¼ì„œ | hx711 |
| ëª¨í„° | dcëª¨í„° |
| ëª¨í„° ì œì–´ | PID  ì œì–´ |
| RestAPI í†µì‹  | FastAPI |
| ì‹¤ì‹œê°„ ì›¹ìº  | PyRTOS |

### port ì„¤ì •

1. í˜„ì¬ í¬íŠ¸ ìƒíƒœ í™•ì¸

```docker
sudo ufw status
# ê²°ê³¼ ì˜ˆì‹œ
Status: active
To                         Action      From
--                         ------      ----
22                         ALLOW       Anywhere                  
80                         ALLOW       Anywhere                  
44                         ALLOW       Anywhere                  
8989                       ALLOW       Anywhere                  
9000                       ALLOW       Anywhere                  
8080/tcp                   ALLOW       Anywhere                  
22/tcp                     ALLOW       Anywhere                  
9005                       ALLOW       Anywhere                  
9005/tcp                   ALLOW       Anywhere                  
80/tcp                     ALLOW       Anywhere                  
443                        ALLOW       Anywhere                  
3306/tcp                   ALLOW       Anywhere                  
3306                       ALLOW       Anywhere                  
3389                       ALLOW       Anywhere                  
3307                       ALLOW       Anywhere                  
3307/tcp                   ALLOW       Anywhere                  
22 (v6)                    ALLOW       Anywhere (v6)             
80 (v6)                    ALLOW       Anywhere (v6)             
44 (v6)                    ALLOW       Anywhere (v6)             
8989 (v6)                  ALLOW       Anywhere (v6)             
9000 (v6)                  ALLOW       Anywhere (v6)             
8080/tcp (v6)              ALLOW       Anywhere (v6)             
22/tcp (v6)                ALLOW       Anywhere (v6)             
9005 (v6)                  ALLOW       Anywhere (v6)             
9005/tcp (v6)              ALLOW       Anywhere (v6)             
80/tcp (v6)                ALLOW       Anywhere (v6)             
443 (v6)                   ALLOW       Anywhere (v6)             
3306/tcp (v6)              ALLOW       Anywhere (v6)             
3306 (v6)                  ALLOW       Anywhere (v6)             
3389 (v6)                  ALLOW       Anywhere (v6)             
3307 (v6)                  ALLOW       Anywhere (v6)             
3307/tcp (v6)              ALLOW       Anywhere (v6)        
```

1. í¬íŠ¸ í™œì„±í™”/ë¹„í™œì„±í™”

```docker
# UFW í™œì„±í™”
sudo ufw enable

# íŠ¹ì • í¬íŠ¸ ì—´ê¸°
sudo ufw allow 8080    # 8080 í¬íŠ¸ ê°œë°©
sudo ufw allow 80      # HTTP í¬íŠ¸
sudo ufw allow 443     # HTTPS í¬íŠ¸

# íŠ¹ì • í¬íŠ¸ ì°¨ë‹¨
sudo ufw deny 8080     # 8080 í¬íŠ¸ ì°¨ë‹¨
sudo ufw delete allow 8080  # ê¸°ì¡´ í—ˆìš© ê·œì¹™ ì‚­ì œ
```

1. í”„ë¡œì íŠ¸ì— ì‚¬ìš©í•œ í¬íŠ¸ ë²ˆí˜¸

| êµ¬ë¶„ | EC2 | docker |
| --- | --- | --- |
| SSH  ì ‘ì† | 22 | X |
| HTTP ì ‘ì† | 80 | X |
| HTTPS ì ‘ì† | 443 | X |
| Nginx | 80, 443 | 80, 443 |
| React | X | 80 |
| Springboot | X | 8080 |
| MySQL | 3307 | 3306 |
| Jenkins | 9005, 50000 | 8080, 50000 |
| Portainer | 8000, 9000 | 8000, 9000 |
| EC2 ì›ê²© ì ‘ì† | 3389 | 3389 |
| Gerrit | 8989 | 8989 |

## âš™ï¸ 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### Backend (application.properties)

```yaml
spring.application.name=myonitoring

# API
app.api-prefix=/api

# MySQL
spring.datasource.url=jdbc:mysql://${DBHOST}:3306/${MYSQL_DATABASE}?useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=${MYSQL_USER}
spring.datasource.password=${MYSQL_PASSWORD}

# JPA
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# JWT
jwt.secret=${JWT_SECRET}
jwt.access-token-validity-in-seconds=3600
jwt.refresh-token-validity-in-seconds=604800

allowed.origins=${ALLOWED_ORIGINS}

# Kakao OAuth
spring.security.oauth2.client.registration.kakao.client-id=${KAKAO_CLIENT_ID}
spring.security.oauth2.client.registration.kakao.client-secret=${KAKAO_CLIENT_SECRET}
spring.security.oauth2.client.registration.kakao.redirect-uri=${KAKAO_REDIRECT_URI}
spring.security.oauth2.client.registration.kakao.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.kakao.scope=account_email
spring.security.oauth2.client.registration.kakao.client-name=Kakao
spring.security.oauth2.client.registration.kakao.client-authentication-method=client_secret_post

spring.security.oauth2.client.provider.kakao.authorization-uri=https://kauth.kakao.com/oauth/authorize
spring.security.oauth2.client.provider.kakao.token-uri=https://kauth.kakao.com/oauth/token
spring.security.oauth2.client.provider.kakao.issuer-uri=https://kauth.kakao.com

# Cookie Settings
cookie.secure=${COOKIE_SECURE:false}

# Firebase
firebase.config.apiKey=${FIREBASE_API_KEY}
firebase.config.authDomain=${FIREBASE_AUTH_DOMAIN}
firebase.config.projectId=${FIREBASE_PROJECT_ID}
firebase.config.storageBucket=${FIREBASE_STORAGE_BUCKET}
firebase.config.messagingSenderId=${FIREBASE_MESSAGING_SENDER_ID}
firebase.config.appId=${FIREBASE_APP_ID}
firebase.config.measurementId=${FIREBASE_MEASUREMENT_ID}
firebase.config.vapidKey=${FIREBASE_VAPID_KEY}
FIREBASE_CONFIG_PATH=${FIREBASE_CONFIG_PATH}
```

### .env.example

```bash
DBHOST=localhost
MYSQL_ROOT_PASSWORD=
MYSQL_DATABASE=
MYSQL_USER=
MYSQL_PASSWORD=
SERVER_NAME=localhost
JWT_SECRET=
KAKAO_CLIENT_ID=
KAKAO_CLIENT_SECRET=
KAKAO_REDIRECT_URI=
ALLOWED_ORIGINS=http://localhost:5173
VITE_KAKAO_API_KEY=
VITE_KAKAO_REDIRECT_URI=
FIREBASE_CONFIG_PATH=
FIREBASE_API_KEY=
FIREBASE_AUTH_DOMAIN=
FIREBASE_PROJECT_ID=
FIREBASE_STORAGE_BUCKET=
FIREBASE_MESSAGING_SENDER_ID=
FIREBASE_APP_ID=
FIREBASE_VAPID_KEY=
FIREBASE_MEASUREMENT_ID=
```

## ğŸš€ 4. ë°°í¬ ê°€ì´ë“œ

### 4.1 ì„œë²„ ì„¸íŒ…

1. ì„œë²„ ê¸°ë³¸ ì„¤ì •

```bash
# íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸
sudo apt update
sudo apt upgrade
```

1. Docker ì„¤ì¹˜(EC2/Linux)

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
sudo apt update
sudo apt install ca-certificates curl gnupg lsb-release

# ë ˆí¬ì§€í† ë¦¬
sudo mkdir -p /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# ë ˆí¬ì§€í† ë¦¬ ì¶”ê°€
echo "deb [arch=$(dpkg --print-architecture) \
signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
$(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# ë„ì»¤ ì„¤ì¹˜í•˜ê¸°
sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin

```

1. Dockerfile ìƒì„±
    1. backend/Dockerfile
    
    ```docker
    FROM openjdk:17-slim
    
    WORKDIR /app
    
    COPY . .
    
    RUN chmod +x ./gradlew
    RUN ./gradlew bootJar
    
    EXPOSE 8080
    
    CMD ["java", "-jar", "build/libs/myonitoring-0.0.1-SNAPSHOT.jar"]
    ```
    
    b. frontend/Dockerfile
    
    ```docker
    FROM node:20 AS build
    WORKDIR /app
    
    # ì „ì²´ í”„ë¡œì íŠ¸ íŒŒì¼ ë¨¼ì € ë³µì‚¬
    COPY myonitoring/ .
    
    # ì˜ì¡´ì„± ì„¤ì¹˜
    RUN npm install
    RUN npm install @rollup/rollup-linux-x64-gnu
    RUN npm install @heroicons/react
    
    # ì´ë¯¸ì§€ ë””ë ‰í† ë¦¬ ë³µì‚¬ ìœ„ì¹˜ ë³€ê²½
    COPY myonitoring/src/assets/images /app/src/assets/images
    
    RUN ls -l /app/src/assets/images
    
    # ìºì‹œ ì œê±°
    RUN rm -rf node_modules/.cache
    
    # ë¹Œë“œ
    RUN npm run build --verbose
    
    FROM nginx:alpine
    # ë¹Œë“œëœ íŒŒì¼ê³¼ ì´ë¯¸ì§€ í•¨ê»˜ ë³µì‚¬
    COPY --from=build /app/dist /usr/share/nginx/html
    COPY --from=build /app/src/assets/images /usr/share/nginx/html/assets/images
    ```
    
    c. nginx/Dockerfile
    
    ```docker
    FROM nginx:alpine
    COPY conf.d/default.conf /etc/nginx/conf.d/default.conf
    COPY html /usr/share/nginx/html
    EXPOSE 80
    EXPOSE 443
    CMD ["nginx", "-g", "daemon off;"]
    ```
    

### 4.2 ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

1. MySQL ì»¨í…Œì´ë„ˆ

```bash
docker run --name mysql-container -p 3307:3306 \\
-e MYSQL_ROOT_PASSWORD=your_password \\
-e MYSQL_DATABASE=your_db \\
-d mysql
```

### 4.3 Jenkins ì„¤ì •

1. Jenkins ì»¨í…Œì´ë„ˆ ìƒì„±

```bash
docker run --name jenkins -d \\
-p 9005:8080 -p 50000:50000 \\
-v /home/ubuntu/jenkins:/var/jenkins_home \\
-v /var/run/docker.sock:/var/run/docker.sock \
jenkins/jenkins:lts
```

1. Jenkins ë²„ì „ ìµœì‹ í™”(localì˜ Jenkins.war íŒŒì¼ì„ EC2 ì„œë²„ì— ë³µì‚¬í•˜ëŠ” ë°©ë²•)

```bash
*# ë¡œì»¬ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰*
scp -i I12B201T.pem jenkins.war ubuntu@i12b201.p.ssafy.io:/home/ubuntu/

# EC2 í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰
sudo docker cp /home/ubuntu/jenkins.war jenkins:/usr/share/jenkins/jenkins.war

# ê¶Œí•œ ì„¤ì • ë° ì¬ì‹œì‘
sudo docker exec jenkins chown jenkins:jenkins /usr/share/jenkins/jenkins.war
sudo docker restart jenkins

# docker jenkins ì»¨í…Œì´ë„ˆ ì‹¤í–‰
sudo docker start jenkins

# docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë¡œê·¸ í™•ì¸
sudo docker logs jenkins
```

1. Jenkins ì „ìš© docker-compose.yml íŒŒì¼ ìƒì„±

```docker
services:
  jenkins:
    image: jenkins/jenkins:2.495
    container_name: jenkins
    user: root
    privileged: true
    ports:
      - "9005:8080"
      - "50000:50000"
    volumes:
      - ./jenkins_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
      - /usr/bin/docker:/usr/bin/docker
    environment:
      - TZ=Asia/Seoul
    restart: always
```

1. Pipeline ì„¤ì •
- GitLab Webhook ì„¤ì •
- í™˜ê²½ë³€ìˆ˜ ì„¤ì •
- ë¹Œë“œ íŠ¸ë¦¬ê±° ì„¤ì •

### 4.4 Nginx ì„¤ì •

1. SSL ì¸ì¦ì„œ ë°œê¸‰

```bash
docker exec -it nginx bash
apt-get update
apt-get install certbot python3-certbot-nginx
certbot --nginx -d your-domain.com
```

1. Nginx ì„¤ì • íŒŒì¼(nginx/conf.d/default.conf)

```
server {
    listen 80;
    server_name ${SERVER_NAME};    
    return 301 https://$server_name$request_uri; 
}

# HTTPS server
server {
    listen 443 ssl;
    server_name ${SERVER_NAME};
    
		# SSL ì¸ì¦ì„œ nginx ì»¨í…Œì´ë„ˆë¡œ ë³µì‚¬
    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;

    # SSL ì„¤ì •
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;

    # ë°±ì—”ë“œ APIë¡œ í¬ì›Œë”©
    location /api/ {
        proxy_pass http://backend:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # í”„ë¡ íŠ¸ì—”ë“œë¡œ í¬ì›Œë”©
    location / {
        root /usr/share/nginx/html;
        index index.html;
        try_files $uri $uri/ /index.html;
    }
}
```

### 4.5 docker-compose.yml íŒŒì¼ ìƒì„±

1. docker-compose.yml (ê³µí†µ íŒŒì¼)
    
    ```docker
    services:
      nginx:
        build:
          context: ./nginx
          dockerfile: Dockerfile
        image: myonitoring-nginx:latest 
        environment:
          - TZ=Asia/Seoul
        depends_on:
          - frontend
          - backend
        ports:
          - "80:80"
    
      frontend:
        image: kst1040/myonitoring-frontend:latest
        environment:
          - TZ=Asia/Seoul
        expose:
          - "80"
    
      backend:
        image: kst1040/myonitoring-backend:latest
        environment:
          - TZ=Asia/Seoul
          - MYSQL_DATABASE=${MYSQL_DATABASE}
          - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
          - MYSQL_USER=${MYSQL_USER}
          - MYSQL_PASSWORD=${MYSQL_PASSWORD}
          - JWT_SECRET=${JWT_SECRET}
          - ALLOWED_ORIGINS=${ALLOWED_ORIGINS}
          - KAKAO_CLIENT_ID=${KAKAO_CLIENT_ID}
          - KAKAO_CLIENT_SECRET=${KAKAO_CLIENT_SECRET}
          - KAKAO_REDIRECT_URI=${KAKAO_REDIRECT_URI}
          - VITE_KAKAO_API_KEY=${VITE_KAKAO_API_KEY}
          - VITE_KAKAO_REDIRECT_URI=${VITE_KAKAO_REDIRECT_URI}
          - FIREBASE_CONFIG_PATH=${FIREBASE_CONFIG_PATH}
          - FIREBASE_API_KEY=${FIREBASE_API_KEY}
          - FIREBASE_AUTH_DOMAIN=${FIREBASE_AUTH_DOMAIN}
          - FIREBASE_PROJECT_ID=${FIREBASE_PROJECT_ID}
          - FIREBASE_STORAGE_BUCKET=${FIREBASE_STORAGE_BUCKET}
          - FIREBASE_MESSAGING_SENDER_ID=${FIREBASE_MESSAGING_SENDER_ID}
          - FIREBASE_APP_ID=${FIREBASE_APP_ID}
          - FIREBASE_VAPID_KEY=${FIREBASE_VAPID_KEY}
          - FIREBASE_MEASUREMENT_ID=${FIREBASE_MEASUREMENT_ID}
        volumes:
          - ./myonitoring-firebase-adminsdk-fbsvc-78c9791370.json:/app/src/main/resources/firebase-config.json
        expose:
          - "8080"
        depends_on:
          mysql:
            condition: service_healthy
    
      mysql:
        image: mysql:8.0
        command: 
          - mysqld
          - --default-authentication-plugin=mysql_native_password
          - --log-timestamps=system
        restart: always
        environment:
          - TZ=Asia/Seoul
          - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
          - MYSQL_DATABASE=${MYSQL_DATABASE}
          - MYSQL_USER=${MYSQL_USER}
          - MYSQL_PASSWORD=${MYSQL_PASSWORD}
        volumes:
          - mysql_data:/var/lib/mysql
        healthcheck:
          test: ["CMD", "mysqladmin", "ping", "-h", "localhost"]
          interval: 10s
          retries: 5
        ports:
          - "3307:3306"
    
    volumes:
      mysql_data:
    ```
    
2. docker-compose.prod.yml (ìš´ì˜ ì„œë²„ìš©)
    
    ```docker
    services:
      nginx:
        ports:
          - "80:80"
          - "443:443"
        volumes:
          - ./nginx/conf.d:/etc/nginx/conf.d
          - /etc/letsencrypt/live/myonitoring.site/fullchain.pem:/etc/nginx/ssl/cert.pem:ro
          - /etc/letsencrypt/live/myonitoring.site/privkey.pem:/etc/nginx/ssl/key.pem:ro
    
      mysql:
        expose:
          - "3306"
        environment:
          - MYSQL_DATABASE=${MYSQL_DATABASE}
          - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
          - MYSQL_USER=${MYSQL_USER}
          - MYSQL_PASSWORD=${MYSQL_PASSWORD}
    
      backend:
        environment:
          - SPRING_PROFILES_ACTIVE=prod
          - SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/${MYSQL_DATABASE}?useSSL=false
          - SPRING_DATASOURCE_USERNAME=${MYSQL_USER}
          - SPRING_DATASOURCE_PASSWORD=${MYSQL_PASSWORD}
    ```
    
3. docker-compose.override.yml (ê°œë°œ í™˜ê²½ìš©)
    
    ```docker
    services:
      nginx:
        ports:
          - "80:80"
    
      frontend:
        build:      
          context: ./frontend/myonitoring    # npm installì´ ì‹¤í–‰ë˜ëŠ” í´ë”
          dockerfile: ../Dockerfile          # Dockerfileì˜ ìƒëŒ€ ê²½ë¡œ
        volumes:    
          - ./frontend/myonitoring:/app      
          - /app/node_modules
    
      backend:
        build:      
          context: ./backend
          dockerfile: Dockerfile
        volumes:    
          - ./backend:/app
          - /app/build
        environment:
          - SPRING_PROFILES_ACTIVE=dev
          - SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/${MYSQL_DATABASE}?useSSL=false
          - SPRING_DATASOURCE_USERNAME=${MYSQL_USER}
          - SPRING_DATASOURCE_PASSWORD=${MYSQL_PASSWORD}
    
      mysql:
        ports:
          - "3306:3306"
        environment:
          - MYSQL_DATABASE=${MYSQL_DATABASE}
          - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
          - MYSQL_USER=${MYSQL_USER}
          - MYSQL_PASSWORD=${MYSQL_PASSWORD}
    ```
    

## ğŸ‘¥ 5. ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™

### 5.1 ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸

1. ì¹´ì¹´ì˜¤ ê°œë°œì ì„¼í„°ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡
2. REST API í‚¤ ë°œê¸‰
3. ë¦¬ë‹¤ì´ë ‰íŠ¸ URI ì„¤ì •
4. application.propertiesì— ì„¤ì • ì¶”ê°€

### 5.2 Firebase FCM ì„œë¹„ìŠ¤

1. Firebase ë¡œê·¸ì¸ í›„ Firebase Console í´ë¦­
2. í”„ë¡œì íŠ¸ ë§Œë“¤ê¸° í´ë¦­
3. ê°€ì´ë“œë¥¼ ë”°ë¼ì„œ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±(firebase-config.json íŒŒì¼ ë³µì‚¬)
4. ë³µì‚¬í•œ jsoníŒŒì¼ì„ Springboot Projectì˜ src/main/java/resources ì— ë¶™ì´ê¸°
5. í”„ë¡œì íŠ¸ ê°œìš”(ì‚¬ì´ë“œ ë°”) ì˜†ì˜ í†±ë‹ˆë°”í€´ í´ë¦­ â†’ í”„ë¡œì íŠ¸ ì„¤ì • â†’ í´ë¼ìš°ë“œ ë©”ì‹œì§•
6. ì›¹ êµ¬ì„± ë¶€ë¶„ì—ì„œ ì›¹ í‘¸ì‹œ ì¸ì¦ì„œ ìƒì„± í´ë¦­(VAPID KEY)
7. ë‹¤ìŒ ì•„ë˜ ë‚´ìš©ì„ .env íŒŒì¼ë¡œ ì‘ì„±

```
FIREBASE_CONFIG_PATH=your-firebase-config-path
FIREBASE_API_KEY=your-firebase-api-key
FIREBASE_AUTH_DOMAIN=your-firebase-auth-domain
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_STORAGE_BUCKET=your-firebase-storage-bucket
FIREBASE_MESSAGING_SENDER_ID=your-firebase-messaging-sender-id
FIREBASE_APP_ID=your-firebase-app-id
FIREBASE_VAPID_KEY=your-firebase-vapid-key
FIREBASE_MEASUREMENT_ID=your-firebase-measurement-id

```

## âš ï¸ 6. íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 6.1 Jenkins ë¹Œë“œ ì‹¤íŒ¨

- ì›ì¸: Docker ê¶Œí•œ ë¬¸ì œ
- í•´ê²°: jenkins ì‚¬ìš©ìì—ê²Œ docker ê·¸ë£¹ ê¶Œí•œ ë¶€ì—¬

```bash
sudo usermod -aG docker jenkins
```

### 6.2 CORS ì—ëŸ¬ ë°œìƒ

- ì›ì¸ : cors ì„¤ì •ì„ nginx.conf íŒŒì¼ê³¼ ë°±ì—”ë“œì˜ application.propertiesì—ì„œ ë™ì‹œì— ì²˜ë¦¬
- í•´ê²° : nginxì— ì¡´ì¬í•˜ëŠ” cors ì„¤ì • ì½”ë“œë¥¼ ì œê±°

### 6.3 Firebase Cloud Messaging ì•Œë¦¼ UI ë¯¸ì¶œë ¥

- ì›ì¸ : ë¡œì»¬ OSì˜ ì•Œë¦¼ ë° ì‘ì—… ì„¤ì •ì„ â€˜ë”â€™ìœ¼ë¡œ ì„¤ì •
- í•´ê²° : ì‹œìŠ¤í…œ â†’ ì•Œë¦¼ â†’ â€˜ì¼¬â€™ ìœ¼ë¡œ ë³€ê²½ í›„ í•˜ìœ„ ì˜µì…˜ ëª¨ë‘ í—ˆìš©

## ğŸ¬ 7. MySQL DB DumpFile

[MyonitoringDBDump20250220.sql](/exec/MyonitoringDBDump20250220.sql)